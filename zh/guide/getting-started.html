<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速上手 | Gozz</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="基于编译时的 Golang 注解分析及代码生成器，提供开箱即用的架构强化和插件化扩展能力，协助落地企业级最佳实践、提速业务开发。">
    
    <link rel="preload" href="/gozz/assets/css/0.styles.300559b5.css" as="style"><link rel="preload" href="/gozz/assets/js/app.042388d6.js" as="script"><link rel="preload" href="/gozz/assets/js/2.56b32e98.js" as="script"><link rel="preload" href="/gozz/assets/js/1.43cfabac.js" as="script"><link rel="preload" href="/gozz/assets/js/25.63741500.js" as="script"><link rel="prefetch" href="/gozz/assets/js/10.18312648.js"><link rel="prefetch" href="/gozz/assets/js/11.a751f345.js"><link rel="prefetch" href="/gozz/assets/js/12.da302e69.js"><link rel="prefetch" href="/gozz/assets/js/13.5b11254d.js"><link rel="prefetch" href="/gozz/assets/js/14.cb88526c.js"><link rel="prefetch" href="/gozz/assets/js/15.8f39dbb1.js"><link rel="prefetch" href="/gozz/assets/js/16.f4bf23f4.js"><link rel="prefetch" href="/gozz/assets/js/17.3ceb826c.js"><link rel="prefetch" href="/gozz/assets/js/18.b434740f.js"><link rel="prefetch" href="/gozz/assets/js/19.b0466d00.js"><link rel="prefetch" href="/gozz/assets/js/20.404aed17.js"><link rel="prefetch" href="/gozz/assets/js/21.491ae04b.js"><link rel="prefetch" href="/gozz/assets/js/22.83eb81f7.js"><link rel="prefetch" href="/gozz/assets/js/23.9ca48153.js"><link rel="prefetch" href="/gozz/assets/js/24.71d37776.js"><link rel="prefetch" href="/gozz/assets/js/26.0e357669.js"><link rel="prefetch" href="/gozz/assets/js/27.7d8dbca3.js"><link rel="prefetch" href="/gozz/assets/js/28.f4d0499f.js"><link rel="prefetch" href="/gozz/assets/js/29.8cec7f68.js"><link rel="prefetch" href="/gozz/assets/js/3.e04a1178.js"><link rel="prefetch" href="/gozz/assets/js/30.0a028ce6.js"><link rel="prefetch" href="/gozz/assets/js/31.cfc84a81.js"><link rel="prefetch" href="/gozz/assets/js/32.14c8cbbb.js"><link rel="prefetch" href="/gozz/assets/js/33.5e6cde36.js"><link rel="prefetch" href="/gozz/assets/js/34.13f50809.js"><link rel="prefetch" href="/gozz/assets/js/35.5b9db386.js"><link rel="prefetch" href="/gozz/assets/js/4.6aaf9938.js"><link rel="prefetch" href="/gozz/assets/js/5.868c619a.js"><link rel="prefetch" href="/gozz/assets/js/6.11ff47cc.js"><link rel="prefetch" href="/gozz/assets/js/7.3acf3203.js"><link rel="prefetch" href="/gozz/assets/js/vendors~docsearch.b7a3ab4f.js">
    <link rel="stylesheet" href="/gozz/assets/css/0.styles.300559b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gozz/zh/" class="home-link router-link-active"><!----> <span class="site-name">Gozz</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gozz/zh/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/gozz/zh/past-and-present/" class="nav-link">
  前世今生
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gozz/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/gozz/zh/guide/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/go-zing/gozz" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gozz/zh/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/gozz/zh/past-and-present/" class="nav-link">
  前世今生
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gozz/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/gozz/zh/guide/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/go-zing/gozz" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gozz/zh/guide/" aria-current="page" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gozz/zh/guide/#愿景" class="sidebar-link">愿景</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/#设计理念" class="sidebar-link">设计理念</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/#适用场景" class="sidebar-link">适用场景</a></li></ul></li><li><a href="/gozz/zh/guide/getting-started.html" aria-current="page" class="active sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gozz/zh/guide/getting-started.html#环境" class="sidebar-link">环境</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/getting-started.html#指令" class="sidebar-link">指令</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/getting-started.html#全局参数" class="sidebar-link">全局参数</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/getting-started.html#大于配置的约定" class="sidebar-link">大于配置的约定</a></li></ul></li><li><a href="/gozz/zh/guide/how-it-works.html" class="sidebar-link">原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gozz/zh/guide/how-it-works.html#ast-是什么" class="sidebar-link">AST 是什么</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/how-it-works.html#golang-ast-简介" class="sidebar-link">Golang AST 简介</a></li><li class="sidebar-sub-header"><a href="/gozz/zh/guide/how-it-works.html#注解分析" class="sidebar-link">注解分析</a></li></ul></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/gozz/zh/guide/plugins/" class="sidebar-heading clickable"><span>内置插件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/gozz/zh/guide/plugins/api.html" class="sidebar-link">Api</a></li><li><a href="/gozz/zh/guide/plugins/doc.html" class="sidebar-link">Doc</a></li><li><a href="/gozz/zh/guide/plugins/impl.html" class="sidebar-link">Impl</a></li><li><a href="/gozz/zh/guide/plugins/option.html" class="sidebar-link">Option</a></li><li><a href="/gozz/zh/guide/plugins/orm.html" class="sidebar-link">Orm</a></li><li><a href="/gozz/zh/guide/plugins/tag.html" class="sidebar-link">Tag</a></li><li><a href="/gozz/zh/guide/plugins/wire.html" class="sidebar-link">Wire</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h1> <p><code>Gozz</code> 命令行工具基于 <a href="https://github.com/spf13/cobra" target="_blank" rel="noopener noreferrer">cobra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 构建，命令行交互语法遵循格式：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>gozz <span class="token punctuation">[</span>--GLOBAL-FLAG<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>--COMMAND-FLAG<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">]</span>
</code></pre></div><h2 id="环境"><a href="#环境" class="header-anchor">#</a> 环境</h2> <p><code>Gozz</code> 在启动时会自动加载用户目录 <code>~/.gozz/plugins/</code> 下的 <code>.so</code> 插件，期间发生的异常会被忽略。</p> <h2 id="指令"><a href="#指令" class="header-anchor">#</a> 指令</h2> <p><code>Gozz</code> 支持以下指令：</p> <h3 id="gozz-list"><a href="#gozz-list" class="header-anchor">#</a> <code>gozz list</code></h3> <p>该指令会列出已经被正确注册的插件，并且输出插件和参数相关的介绍到控制台，使用者也可以通过该指令来检查插件是否被正确加载。</p> <h3 id="gozz-run"><a href="#gozz-run" class="header-anchor">#</a> <code>gozz run</code></h3> <p>用法：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>gozz run <span class="token punctuation">[</span>--plugin/-p<span class="token punctuation">]</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span> 
</code></pre></div><p>该指令会启动对 <code>filename</code> 文件或目录注解的分析，
并将分析的结构化注解及上下文，提交至指定的若干插件进行下一步工作。这将会是使用者最常用的指令。</p> <h4 id="参数-filename"><a href="#参数-filename" class="header-anchor">#</a> 参数 <code>filename</code></h4> <p>当 <code>filename</code> 为文件时，解析器只会解析当前单个文件内容</p> <p>当 <code>filename</code> 为目录时，解析器会遍历该目录以及嵌套子目录</p> <h4 id="可选参数-plugin-p-name-options"><a href="#可选参数-plugin-p-name-options" class="header-anchor">#</a> 可选参数 <code>--plugin / -p &quot;name:options...&quot;</code></h4> <p>使用 <code>gozz run</code> 必须指定 1 ~ N 个插件运行</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 指定单个插件</span>
gozz run <span class="token parameter variable">--plugin</span> <span class="token string">&quot;foo&quot;</span> ./
<span class="token comment"># 简写参数</span>
gozz run <span class="token parameter variable">-p</span> <span class="token string">&quot;foo&quot;</span> ./
<span class="token comment"># 指定多个插件</span>
gozz run <span class="token parameter variable">-p</span> <span class="token string">&quot;foo&quot;</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;bar&quot;</span> ./
</code></pre></div><p>单次运行指定多个插件时，插件们会按参数顺序串行执行，尽管每个插件运行前都会重新进行文件解析，
但基于文件元信息的版本解析缓存将会在进程内复用，因此同时指定多个插件会有更好体验。</p> <hr> <p>在指定插件名后方使用 <code>:</code> 间隔，可以通过该参数追加插件默认选项：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 使用foo插件 并为所有匹配的注解 添加两个默认选项 [ key:value key2:value2 ]</span>
gozz run <span class="token parameter variable">-p</span> <span class="token string">&quot;foo:key=value:key2=value2&quot;</span> ./ 
</code></pre></div><p>注解 <code>+zz:foo:key=value3</code> 添加默认选项 <code>key=value:key2=value2</code> 后 等价于：</p> <p><code>+zz:foo:key=value3(已有值未被覆盖):key2=value2(缺省值使用默认)</code></p> <h3 id="wip-gozz-install"><a href="#wip-gozz-install" class="header-anchor">#</a> [WIP] <code>gozz install</code></h3> <p>用法</p> <div class="language-shell extra-class"><pre class="language-shell"><code>gozz <span class="token function">install</span> <span class="token punctuation">[</span>--output/-o<span class="token punctuation">]</span> <span class="token punctuation">[</span>--filename/-f<span class="token punctuation">]</span> <span class="token punctuation">[</span>repository<span class="token punctuation">]</span> 
</code></pre></div><p>运行该指令会尝试将提供的 <code>repository</code> 代码编译为 <code>.so</code> 插件文件，并安装至用户目录 <code>~/.gozz/plugins</code> 下。</p> <h4 id="参数-repository"><a href="#参数-repository" class="header-anchor">#</a> 参数 <code>repository</code></h4> <p>当 <code>repository</code> 带有网络协议前缀时，如 <code>ssh://、git://、http://、https://</code> ，会使用 <code>git</code> 进行仓库远程下载，
否则会视为本地文件路径。</p> <h4 id="可选参数-output-o-filename"><a href="#可选参数-output-o-filename" class="header-anchor">#</a> 可选参数 <code>--output / -o &quot;filename&quot;</code></h4> <p>指定该参数时，编译结果会输出为指定文件名，不再自动安装到用户目录。</p> <h4 id="可选参数-filename-f-filename"><a href="#可选参数-filename-f-filename" class="header-anchor">#</a> 可选参数 <code>--filename / -f &quot;filename&quot;</code></h4> <p>指定该参数时，编译会使用该参数作为相对路径进行编译。</p> <hr> <p>使用该指令成功安装外部插件需要满足以下前提：</p> <ul><li>编译当前 <code>gozz</code> 使用的 Golang 版本和当前执行环境 Golang 版本一致。</li> <li>指定 <code>repository</code> 依赖兼容当前 <code>gozz</code> 版本使用的 <code>gozz-core</code>。</li> <li>其他影响 Golang 插件机制的环境因素：
<a href="https://tonybai.com/2021/07/19/understand-go-plugin/" target="_blank" rel="noopener noreferrer">一文搞懂Go语言的plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul> <h2 id="全局参数"><a href="#全局参数" class="header-anchor">#</a> 全局参数</h2> <h3 id="x-extension-filename"><a href="#x-extension-filename" class="header-anchor">#</a> <code>-x / --extension [filename]</code></h3> <p>例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 运行 list</span>
gozz <span class="token parameter variable">-x</span> plugin.so list
<span class="token comment"># 运行 run</span>
gozz <span class="token parameter variable">-x</span> plugin.so run <span class="token parameter variable">-p</span> <span class="token string">&quot;plugin&quot;</span> ./
</code></pre></div><p>使用该参数可以在工具启动时 额外加载指定文件路径的 <code>.so</code> 插件，通过此方式加载的插件如果发生异常，会输出异常信息并立即退出进程。</p> <h2 id="大于配置的约定"><a href="#大于配置的约定" class="header-anchor">#</a> 大于配置的约定</h2></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/go-zing/gozz-doc/edit/master/docs/zh/guide/getting-started.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/10/16 05:23:47</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gozz/zh/guide/" class="prev router-link-active">
        介绍
      </a></span> <span class="next"><a href="/gozz/zh/guide/how-it-works.html">
        原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gozz/assets/js/app.042388d6.js" defer></script><script src="/gozz/assets/js/2.56b32e98.js" defer></script><script src="/gozz/assets/js/1.43cfabac.js" defer></script><script src="/gozz/assets/js/25.63741500.js" defer></script>
  </body>
</html>
