(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{309:function(a,t,e){"use strict";e.r(t);var s=e(10),n=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"get-started"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get-started"}},[a._v("#")]),a._v(" Get Started")]),a._v(" "),t("p",[t("code",[a._v("Gozz")]),a._v(" CLI is built with "),t("a",{attrs:{href:"https://github.com/spf13/cobra",target:"_blank",rel:"noopener noreferrer"}},[a._v("cobra"),t("OutboundLink")],1),a._v(", command syntax as follows:")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("gozz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--GLOBAL-FLAGS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--COMMAND-FLAGS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARGS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h2",{attrs:{id:"environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#environment"}},[a._v("#")]),a._v(" Environment")]),a._v(" "),t("p",[t("code",[a._v("Gozz")]),a._v(" would lookup "),t("code",[a._v(".so")]),a._v(" plugins in user's home directory "),t("code",[a._v("~/.gozz/plugins/")]),a._v(" when starts up,\nexception raised during these default plugins loading would be ignored.")]),a._v(" "),t("p",[a._v("Use env "),t("code",[a._v("GOZZ_PLUGINS_DIR")]),a._v(" to specify the default plugins install directory.")]),a._v(" "),t("h2",{attrs:{id:"command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command"}},[a._v("#")]),a._v(" Command")]),a._v(" "),t("p",[t("code",[a._v("Gozz")]),a._v(" supports commands as follows:")]),a._v(" "),t("h3",{attrs:{id:"gozz-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gozz-list"}},[a._v("#")]),a._v(" "),t("code",[a._v("gozz list")])]),a._v(" "),t("p",[a._v("This command would list all plugins registered in core and ready to use,\nand their arguments and description would print into your console.\nYou can check whether plugins is correctly loads by core.")]),a._v(" "),t("p",[a._v("Usage：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("gozz list\n")])])]),t("h3",{attrs:{id:"gozz-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gozz-run"}},[a._v("#")]),a._v(" "),t("code",[a._v("gozz run")])]),a._v(" "),t("p",[a._v("Usage：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("gozz run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--plugin/-p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])])]),t("p",[a._v("This command would start analysis to provided "),t("code",[a._v("filename")]),a._v(",\nand collect annotations context entities to specified ordered plugins for different jobs.\nIt would be the most used command.")]),a._v(" "),t("h4",{attrs:{id:"argument-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#argument-filename"}},[a._v("#")]),a._v(" Argument "),t("code",[a._v("filename")])]),a._v(" "),t("p",[a._v("If "),t("code",[a._v("filename")]),a._v(" is a file. Parser would parse this file only.")]),a._v(" "),t("p",[a._v("If "),t("code",[a._v("filename")]),a._v(" is a directory. Parser would parse walk around and parse all files, including sub-dir.")]),a._v(" "),t("h4",{attrs:{id:"flag-plugin-p-name-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flag-plugin-p-name-options"}},[a._v("#")]),a._v(" Flag "),t("code",[a._v('--plugin / -p "name:options..."')])]),a._v(" "),t("p",[t("code",[a._v("gozz run")]),a._v(" should specify with one or more plugins")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# with single")]),a._v("\ngozz run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--plugin")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"foo"')]),a._v(" ./\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# in short hand")]),a._v("\ngozz run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"foo"')]),a._v(" ./\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# with multi")]),a._v("\ngozz run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"foo"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bar"')]),a._v(" ./\n")])])]),t("p",[a._v("When run with multi plugins, they would execute in specified order.\nEven parser may do analysis before every plugin execute,\n"),t("code",[a._v("Gozz")]),a._v(" provide a file-meta based version cache for analysis results,\nSo that it may got better performance when running with multi plugins than one.")]),a._v(" "),t("h4",{attrs:{id:"append-plugin-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#append-plugin-options"}},[a._v("#")]),a._v(" Append Plugin Options")]),a._v(" "),t("p",[a._v("you could append default options after plugin name and seperated with "),t("code",[a._v(":")]),a._v(".")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# append default option [ key:value key2:value2 ] for plugin foo.")]),a._v("\ngozz run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"foo:key=value:key2=value2"')]),a._v(" ./ \n")])])]),t("p",[a._v("If annotation "),t("code",[a._v("+zz:foo:key=value3")]),a._v(" got default option "),t("code",[a._v("key=value:key2=value2")]),a._v(", treat as follows:")]),a._v(" "),t("p",[t("code",[a._v("+zz:foo:key=value3(key exist,ignore):key2=value2(override from default)")])]),a._v(" "),t("h3",{attrs:{id:"wip-gozz-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wip-gozz-install"}},[a._v("#")]),a._v(" [WIP] "),t("code",[a._v("gozz install")])]),a._v(" "),t("p",[a._v("Usage:")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("gozz "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--output/-o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--filename/-f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("repository"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])])]),t("p",[a._v("This command would try complies "),t("code",[a._v("repository")]),a._v(" into "),t("code",[a._v(".so")]),a._v(" plugin,\nthen saves in user's plugins path "),t("code",[a._v("~/.gozz/plugins")]),a._v(" ( or environment "),t("code",[a._v("GOZZ_PLUGINS_DIR")]),a._v(").")]),a._v(" "),t("h4",{attrs:{id:"argument-repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#argument-repository"}},[a._v("#")]),a._v(" Argument "),t("code",[a._v("repository")])]),a._v(" "),t("p",[a._v("if "),t("code",[a._v("repository")]),a._v(" starts with network protocol, such as "),t("code",[a._v("ssh:// git:// http:// https://")]),a._v(",\nit try downloads these url with "),t("code",[a._v("git")]),a._v(", otherwise use url as local filepath.")]),a._v(" "),t("h4",{attrs:{id:"flag-output-o-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flag-output-o-filename"}},[a._v("#")]),a._v(" Flag "),t("code",[a._v('--output / -o "filename"')])]),a._v(" "),t("p",[a._v("If it was specified, build results would output as provided filename, and do not install into plugins dir.")]),a._v(" "),t("h4",{attrs:{id:"flag-filename-f-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flag-filename-f-filename"}},[a._v("#")]),a._v(" Flag "),t("code",[a._v('--filename / -f "filename"')])]),a._v(" "),t("p",[a._v("If it was specified, build plugins with this relative filename from repository root.")]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("gozz "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" https://github.com/go-zing/gozz-plugins "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" ./contrib/sqlite "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" sqlite.so\n")])])]),t("p",[t("code",[a._v("Gozz")]),a._v(" would download this remote repo and build it with command:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("go build --buildmode=plugin -o sqlite.so ./contrib/sqlite\n")])])]),t("h4",{attrs:{id:"precondition-for-install-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#precondition-for-install-plugins"}},[a._v("#")]),a._v(" Precondition for install plugins")]),a._v(" "),t("ul",[t("li",[a._v("Version must be match between "),t("code",[a._v("gozz")]),a._v(" built from and environment.")]),a._v(" "),t("li",[a._v("Plugin Repo must be adapted with gozz "),t("code",[a._v("gozz-core")]),a._v(".")]),a._v(" "),t("li",[a._v("Others factors effect compatibility of "),t("code",[a._v("go/plugin")]),a._v(".\ncheckout: "),t("a",{attrs:{href:"https://tonybai.com/2021/07/19/understand-go-plugin/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Article for Understanding Golang Plugins"),t("OutboundLink")],1),a._v("。")])]),a._v(" "),t("h2",{attrs:{id:"global-flags"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#global-flags"}},[a._v("#")]),a._v(" Global Flags")]),a._v(" "),t("h3",{attrs:{id:"x-extension-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-extension-filename"}},[a._v("#")]),a._v(" "),t("code",[a._v("-x / --extension [filename]")])]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# execute list command ")]),a._v("\ngozz "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" plugin.so list\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# execute run command")]),a._v("\ngozz "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" plugin.so run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"plugin"')]),a._v(" ./\n")])])]),t("p",[a._v("Use this flag to load external "),t("code",[a._v(".so")]),a._v(" plugin with filepath.\nException raised during these plugins load would print error and exit process.")]),a._v(" "),t("h2",{attrs:{id:"annotation-syntax"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#annotation-syntax"}},[a._v("#")]),a._v(" Annotation Syntax")]),a._v(" "),t("p",[a._v("Annotations are comments that stick with object, and match syntax as follows:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:[PLUGIN]:[ARGS]:[OPTIONS]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"plugin-plugin-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugin-plugin-name"}},[a._v("#")]),a._v(" "),t("code",[a._v("PLUGIN")]),a._v(" - plugin name")]),a._v(" "),t("p",[a._v("Plugin has unique name when registered. This name would also uses for matching annotation. Case-insensitive.")]),a._v(" "),t("p",[a._v("Example: plugin "),t("code",[a._v("Foo")]),a._v(" match annotations with prefix "),t("code",[a._v("+zz:foo")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"args-exact-arguments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-exact-arguments"}},[a._v("#")]),a._v(" "),t("code",[a._v("ARGS")]),a._v(" - Exact Arguments")]),a._v(" "),t("p",[a._v("Plugins would specify exact arguments count.\nThese arguments should append after annotation prefix and seperated with "),t("code",[a._v(":")]),a._v(".\nIf an annotation match plugin prefix but does not have enough arguments. It would be ignored.")]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("p",[a._v("plugin "),t("code",[a._v("foo")]),a._v(" accepts two exact arguments, "),t("code",[a._v("+zz:foo:arg1:arg2")]),a._v(" would be accepted.")]),a._v(" "),t("p",[a._v("but rejects "),t("code",[a._v("+zz:foo:arg1")]),a._v(" and "),t("code",[a._v("+zz:foo")]),a._v(".")]),a._v(" "),t("h4",{attrs:{id:"why-ignore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#why-ignore"}},[a._v("#")]),a._v(" Why Ignore")]),a._v(" "),t("p",[a._v("If an argument could have default value, it should not be a exact argument.")]),a._v(" "),t("p",[a._v("Checkout "),t("RouterLink",{attrs:{to:"/guide/#design-concept"}},[a._v("Design Concept")]),a._v(".")],1),a._v(" "),t("h3",{attrs:{id:"options-optional-arguments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#options-optional-arguments"}},[a._v("#")]),a._v(" "),t("code",[a._v("OPTIONS")]),a._v(" - Optional Arguments")]),a._v(" "),t("p",[a._v("Values after exact arguments would be parsed as "),t("code",[a._v("Key-Value")]),a._v(" pairs option, and passed to plugin.")]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("p",[a._v("Plugin "),t("code",[a._v("foo")]),a._v(" Has 2 exact arguments. When parsing annotation as follows:")]),a._v(" "),t("p",[t("code",[a._v("+zz:foo:arg1:arg2:arg3=value:arg4")])]),a._v(" "),t("p",[a._v("Options "),t("code",[a._v('{"arg3":"value","arg4":""}')]),a._v(" would present.")]),a._v(" "),t("h4",{attrs:{id:"repeatable-optional-arguments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repeatable-optional-arguments"}},[a._v("#")]),a._v(" Repeatable Optional Arguments")]),a._v(" "),t("p",[a._v("Sometimes optional arguments accept slice value, they were often seperated with "),t("code",[a._v(",")]),a._v(", Example:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo:set=a,b,c,d")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("When these options were seperated in different key-value pairs.\nParser would merge them. Example:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo:set=a:set=:set=b:set=c,d")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("is equal to")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo:set=a,,b,c,d")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h4",{attrs:{id:"boolean-option"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#boolean-option"}},[a._v("#")]),a._v(" Boolean Option")]),a._v(" "),t("p",[a._v("Sometimes, plugin would check whether a key exists in options to raise a flag.\nThese were called "),t("code",[a._v("Boolean Option")]),a._v(".")]),a._v(" "),t("p",[a._v("If a "),t("code",[a._v("Boolean Option")]),a._v(" key's value is not empty. In additionally,\nParser would also check this value whether is implicit negative,\nlike "),t("code",[a._v("0 / false / null")]),a._v(".")]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("+zz:bar:arg3=value:arg4")]),a._v(" => "),t("code",[a._v('{"arg3":"value","arg4":""}')])]),a._v(" "),t("li",[t("code",[a._v("+zz:bar:arg3=value:arg4=true")]),a._v(" => "),t("code",[a._v('{"arg3":"value","arg4":"true"}')])]),a._v(" "),t("li",[t("code",[a._v("+zz:bar:arg3=value:arg4=false")]),a._v(" => "),t("code",[a._v('{"arg3":"value"}')])]),a._v(" "),t("li",[t("code",[a._v("+zz:bar:arg3=value:arg4=0")]),a._v(" => "),t("code",[a._v('{"arg3":"value"}')])])]),a._v(" "),t("h4",{attrs:{id:"argument-escape"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#argument-escape"}},[a._v("#")]),a._v(" Argument Escape")]),a._v(" "),t("p",[a._v("Some arguments may contain "),t("code",[a._v(":")]),a._v(", use "),t("code",[a._v("\\")]),a._v(" to escape,\nthis solution works for command line external arguments and annotations arguments.")]),a._v(" "),t("p",[a._v("Example:")]),a._v(" "),t("p",[t("code",[a._v("+zz:plugin:addr=localhost:8080")]),a._v(" -> "),t("code",[a._v("+zz:plugin:addr=localhost\\:8080")])]),a._v(" "),t("p",[a._v("While parsing annotations,\nParses replace "),t("code",[a._v("\\:")]),a._v(" with "),t("code",[a._v("\\u003A")]),a._v(" before annotation split, and replace "),t("code",[a._v("\\u003A")]),a._v(" with "),t("code",[a._v(":")]),a._v(" as last.")]),a._v(" "),t("h3",{attrs:{id:"declaration-object"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#declaration-object"}},[a._v("#")]),a._v(" Declaration Object")]),a._v(" "),t("p",[a._v("Annotation could be added on "),t("code",[a._v("Decl")]),a._v(" blocks, and also "),t("code",[a._v("Spec")]),a._v(" Object.")]),a._v(" "),t("p",[a._v("You can check out "),t("RouterLink",{attrs:{to:"/guide/how-it-works.html#Principle"}},[a._v("Principle")]),a._v(" to know about what is "),t("code",[a._v("Decl")]),a._v(" and "),t("code",[a._v("Spec")]),a._v(".")],1),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("package")]),a._v(" t\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n\tT0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\tT1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:bar")]),a._v("\n\tT2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Annotations added on "),t("code",[a._v("Decl")]),a._v(", would be copied for all "),t("code",[a._v("Spec")]),a._v(" objects in "),t("code",[a._v("Decl")]),a._v(" blocks as follows:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("package")]),a._v(" t\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n\tT0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n\tT1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:bar")]),a._v("\n\tT2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"multiline-annotation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multiline-annotation"}},[a._v("#")]),a._v(" Multiline Annotation")]),a._v(" "),t("h4",{attrs:{id:"annotation-detect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#annotation-detect"}},[a._v("#")]),a._v(" Annotation Detect")]),a._v(" "),t("p",[a._v("Lines starts with "),t("code",[a._v("+zz:")]),a._v(" (ignore whitespace) would be detected as annotations.")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/*\n+zz:foo  <- annotation\n  +zz:foo  <- annotation\n x +zoo:foo <- not\n//   +zoo:foo  <- not\n*/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo  <- annotation")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//   +zoo:  <- annotation")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//   +zoo-  <- not")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// x +zoo:foo <- not")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h4",{attrs:{id:"repeat-annotations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repeat-annotations"}},[a._v("#")]),a._v(" Repeat Annotations")]),a._v(" "),t("p",[a._v("Object could have multi annotations added, and these annotations may contains repeat plugins.\nIt would not be considered as any exception.")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:foo")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:bar")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:bar:filename=./bar")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" T "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("How to handle repeat annotations is based on plugin implement and usage.")]),a._v(" "),t("h2",{attrs:{id:"some-conventions-over-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#some-conventions-over-configuration"}},[a._v("#")]),a._v(" Some Conventions Over Configuration")]),a._v(" "),t("h3",{attrs:{id:"about-filepath-and-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#about-filepath-and-filename"}},[a._v("#")]),a._v(" about filepath and filename")]),a._v(" "),t("p",[a._v("plugins may have arguments for filename as follows:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:impl:./impl.go")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:wire:inject=/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("These filepath should follow these rules:")]),a._v(" "),t("p",[a._v("Example based on directory tree below:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("/go/src/project/\n├── go.mod\n└── types\n    └── api.go\n")])])]),t("h4",{attrs:{id:"_1-if-ends-with-go-use-it-to-generate-go-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-if-ends-with-go-use-it-to-generate-go-file"}},[a._v("#")]),a._v(" 1. If ends with "),t("code",[a._v(".go")]),a._v(", use it to generate go file.")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./api.go")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filename "),t("code",[a._v("api.go")]),a._v(".")]),a._v(" "),t("h4",{attrs:{id:"_2-if-not-ends-with-go-plugin-would-provide-a-default-filename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-if-not-ends-with-go-plugin-would-provide-a-default-filename"}},[a._v("#")]),a._v(" 2. If not ends with "),t("code",[a._v(".go")]),a._v(", plugin would provide a default filename")]),a._v(" "),t("p",[a._v("Most of the plugin default filename formatted as  "),t("code",[a._v("zzgen.${plugin}.go")]),a._v(".")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filename "),t("code",[a._v("zzgen.api.go")])]),a._v(" "),t("h4",{attrs:{id:"_3-most-of-the-filename-arguments-support-templating"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-most-of-the-filename-arguments-support-templating"}},[a._v("#")]),a._v(" 3. Most of the filename arguments support templating")]),a._v(" "),t("p",[a._v("You could use meta info from annotated object like "),t("code",[a._v("Name")]),a._v(" "),t("code",[a._v("Package")]),a._v(" to do templating.")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/go-zing/gozz-core/blob/main/generate.go#L32",target:"_blank",rel:"noopener noreferrer"}},[a._v("String functions provided"),t("OutboundLink")],1),a._v(" in core\nlike "),t("code",[a._v("snake / camel ...")])]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./{{ lower .Name }}.go")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" Foo "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filename "),t("code",[a._v("foo.go")])]),a._v(" "),t("h4",{attrs:{id:"_4-if-filename-is-relative-path-related-to-annotated-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-if-filename-is-relative-path-related-to-annotated-file"}},[a._v("#")]),a._v(" 4. If filename is relative path. Related to annotated file.")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./apix.go")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get full filepath "),t("code",[a._v("/go/src/project/types/apix.go")])]),a._v(" "),t("br"),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:./apix")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filename "),t("code",[a._v("zzgen.api.go")]),a._v(" because it does not have "),t("code",[a._v(".go")]),a._v(" suffix.")]),a._v(" "),t("p",[a._v("And got full filepath  "),t("code",[a._v("/go/src/project/types/apix/zzgen.api.go")])]),a._v(" "),t("h4",{attrs:{id:"_5-if-filepath-is-absolute-related-to-annotated-file-module-root"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-if-filepath-is-absolute-related-to-annotated-file-module-root"}},[a._v("#")]),a._v(" 5. If filepath is absolute. Related to annotated file "),t("code",[a._v("module")]),a._v(" root.")]),a._v(" "),t("p",[t("code",[a._v("module")]),a._v(" root is detected by command "),t("code",[a._v("go env GOMOD")])]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:/apix.go")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filepath "),t("code",[a._v("/go/src/project/apix.go")]),a._v(".")]),a._v(" "),t("br"),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:/apix")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filepath  "),t("code",[a._v("/go/src/project/apix/zzgen.api.go")])]),a._v(" "),t("br"),a._v(" "),t("p",[a._v("If directory "),t("code",[a._v("types")]),a._v(" contains a sub "),t("code",[a._v("module")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("/go/src/project/\n├── go.mod\n└── types\n    ├── api.go\n    └── go.mod\n")])])]),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// /go/src/project/types/api.go")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("This example would get filepath "),t("code",[a._v("/go/src/project/types/zzgen.api.go")])]),a._v(" "),t("h3",{attrs:{id:"custom-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#custom-template"}},[a._v("#")]),a._v(" Custom Template")]),a._v(" "),t("p",[a._v("For most of the code generation, we would check whether exist file named "),t("code",[a._v("${filename}.impl")]),a._v(" in directory.")]),a._v(" "),t("p",[a._v("If it exists, it would be used as generate template. Else, a builtin template with this name would be generated.")]),a._v(" "),t("h3",{attrs:{id:"specified-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#specified-template"}},[a._v("#")]),a._v(" Specified Template")]),a._v(" "),t("p",[a._v("[WIP] Plugins may support optional arguments "),t("code",[a._v("template=${filename}")]),a._v(" for specified template filepath:")]),a._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// +zz:api:/:template=/.gozz/api.tmpl")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),a._v(" API "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);