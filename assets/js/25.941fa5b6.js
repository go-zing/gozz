(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{308:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"快速上手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[s._v("#")]),s._v(" 快速上手")]),s._v(" "),a("p",[a("code",[s._v("Gozz")]),s._v(" 命令行工具基于 "),a("a",{attrs:{href:"https://github.com/spf13/cobra",target:"_blank",rel:"noopener noreferrer"}},[s._v("cobra"),a("OutboundLink")],1),s._v(" 构建，命令行交互语法遵循格式：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gozz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--GLOBAL-FLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--COMMAND-FLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ARGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[s._v("#")]),s._v(" 环境")]),s._v(" "),a("p",[a("code",[s._v("Gozz")]),s._v(" 在启动时会自动加载用户目录 "),a("code",[s._v("~/.gozz/plugins/")]),s._v(" 下的 "),a("code",[s._v(".so")]),s._v(" 插件，期间发生的异常会被忽略。")]),s._v(" "),a("p",[s._v("使用者可以通过指定环境变量 "),a("code",[s._v("GOZZ_PLUGINS_DIR")]),s._v(" 来变更默认的插件安装目录。")]),s._v(" "),a("h2",{attrs:{id:"指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指令"}},[s._v("#")]),s._v(" 指令")]),s._v(" "),a("p",[a("code",[s._v("Gozz")]),s._v(" 支持以下指令：")]),s._v(" "),a("h3",{attrs:{id:"gozz-list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gozz-list"}},[s._v("#")]),s._v(" "),a("code",[s._v("gozz list")])]),s._v(" "),a("p",[s._v("该指令会列出已经被正确注册到内核和可使用的插件，并且输出插件和参数相关的介绍到控制台，使用者也可以通过该指令来检查插件是否被正确加载。")]),s._v(" "),a("h3",{attrs:{id:"gozz-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gozz-run"}},[s._v("#")]),s._v(" "),a("code",[s._v("gozz run")])]),s._v(" "),a("p",[s._v("用法：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gozz run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--plugin/-p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该指令会启动对 "),a("code",[s._v("filename")]),s._v(" 文件或目录注解的分析，\n并将分析的结构化注解及上下文，提交至指定的若干插件进行下一步工作。这将会是使用者最常用的指令。")]),s._v(" "),a("h4",{attrs:{id:"参数-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数-filename"}},[s._v("#")]),s._v(" 参数 "),a("code",[s._v("filename")])]),s._v(" "),a("p",[s._v("当 "),a("code",[s._v("filename")]),s._v(" 为文件时，解析器只会解析当前单个文件内容")]),s._v(" "),a("p",[s._v("当 "),a("code",[s._v("filename")]),s._v(" 为目录时，解析器会遍历该目录以及嵌套子目录")]),s._v(" "),a("h4",{attrs:{id:"可选参数-plugin-p-name-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可选参数-plugin-p-name-options"}},[s._v("#")]),s._v(" 可选参数 "),a("code",[s._v('--plugin / -p "name:options..."')])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("gozz run")]),s._v(" 必须指定 1 ~ N 个插件运行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定单个插件")]),s._v("\ngozz run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--plugin")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),s._v(" ./\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 简写参数")]),s._v("\ngozz run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),s._v(" ./\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定多个插件")]),s._v("\ngozz run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bar"')]),s._v(" ./\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("单次运行指定多个插件时，插件们会按参数顺序串行执行，尽管每个插件运行前都会重新进行文件解析，\n但基于文件元信息的版本解析缓存将会在进程内复用，因此同时指定多个插件会有更好体验。")]),s._v(" "),a("h4",{attrs:{id:"追加插件默认参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#追加插件默认参数"}},[s._v("#")]),s._v(" 追加插件默认参数")]),s._v(" "),a("p",[s._v("在指定插件名后方使用 "),a("code",[s._v(":")]),s._v(" 间隔，可以通过该参数追加插件默认参数：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用foo插件 并为所有匹配的注解 添加两个默认选项 [ key:value key2:value2 ]")]),s._v("\ngozz run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo:key=value:key2=value2"')]),s._v(" ./ \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注解 "),a("code",[s._v("+zz:foo:key=value3")]),s._v(" 添加默认选项 "),a("code",[s._v("key=value:key2=value2")]),s._v(" 后 等价于：")]),s._v(" "),a("p",[a("code",[s._v("+zz:foo:key=value3(已有值未被覆盖):key2=value2(缺省值使用默认)")])]),s._v(" "),a("h3",{attrs:{id:"wip-gozz-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wip-gozz-install"}},[s._v("#")]),s._v(" [WIP] "),a("code",[s._v("gozz install")])]),s._v(" "),a("p",[s._v("用法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gozz "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--output/-o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--filename/-f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("repository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("运行该指令会尝试将提供的 "),a("code",[s._v("repository")]),s._v(" 代码编译为 "),a("code",[s._v(".so")]),s._v(" 插件文件，并安装至用户目录 "),a("code",[s._v("~/.gozz/plugins")]),s._v("\n( 或 "),a("code",[s._v("GOZZ_PLUGINS_DIR")]),s._v(" 指定目录 ) 下。")]),s._v(" "),a("h4",{attrs:{id:"参数-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数-repository"}},[s._v("#")]),s._v(" 参数 "),a("code",[s._v("repository")])]),s._v(" "),a("p",[s._v("当 "),a("code",[s._v("repository")]),s._v(" 带有网络协议前缀时，如 "),a("code",[s._v("ssh://、git://、http://、https://")]),s._v(" ，会使用 "),a("code",[s._v("git")]),s._v(" 进行仓库远程下载，\n否则会视为本地文件路径。")]),s._v(" "),a("h4",{attrs:{id:"可选参数-output-o-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可选参数-output-o-filename"}},[s._v("#")]),s._v(" 可选参数 "),a("code",[s._v('--output / -o "filename"')])]),s._v(" "),a("p",[s._v("指定该参数时，编译结果会输出为指定文件名，不再自动安装到用户目录。")]),s._v(" "),a("h4",{attrs:{id:"可选参数-filename-f-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可选参数-filename-f-filename"}},[s._v("#")]),s._v(" 可选参数 "),a("code",[s._v('--filename / -f "filename"')])]),s._v(" "),a("p",[s._v("指定该参数时，编译会使用该参数作为相对路径进行编译。")]),s._v(" "),a("p",[s._v("例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gozz "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" https://github.com/go-zing/gozz-plugins "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" ./contrib/sqlite "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" sqlite.so\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("则会下载远程项目，在项目内进行插件编译")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("go build --buildmode=plugin -o sqlite.so ./contrib/sqlite\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"使用该指令成功安装外部插件需要满足以下前提"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用该指令成功安装外部插件需要满足以下前提"}},[s._v("#")]),s._v(" 使用该指令成功安装外部插件需要满足以下前提：")]),s._v(" "),a("ul",[a("li",[s._v("编译当前 "),a("code",[s._v("gozz")]),s._v(" 使用的 Golang 版本和当前执行环境 Golang 版本一致。")]),s._v(" "),a("li",[s._v("指定 "),a("code",[s._v("repository")]),s._v(" 依赖兼容当前 "),a("code",[s._v("gozz")]),s._v(" 版本使用的 "),a("code",[s._v("gozz-core")]),s._v("。")]),s._v(" "),a("li",[s._v("其他影响 Golang 插件机制的环境因素：\n"),a("a",{attrs:{href:"https://tonybai.com/2021/07/19/understand-go-plugin/",target:"_blank",rel:"noopener noreferrer"}},[s._v("一文搞懂Go语言的plugin"),a("OutboundLink")],1),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"全局参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局参数"}},[s._v("#")]),s._v(" 全局参数")]),s._v(" "),a("h3",{attrs:{id:"x-extension-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#x-extension-filename"}},[s._v("#")]),s._v(" "),a("code",[s._v("-x / --extension [filename]")])]),s._v(" "),a("p",[s._v("例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行 list")]),s._v("\ngozz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" plugin.so list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行 run")]),s._v("\ngozz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" plugin.so run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugin"')]),s._v(" ./\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("使用该参数可以在工具启动时 额外加载指定文件路径的 "),a("code",[s._v(".so")]),s._v(" 插件，通过此方式加载的插件如果发生异常，会输出异常信息并立即退出进程。")]),s._v(" "),a("h2",{attrs:{id:"注解语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解语法"}},[s._v("#")]),s._v(" 注解语法")]),s._v(" "),a("p",[s._v("注解遵循以下语法：")]),s._v(" "),a("p",[s._v("以"),a("strong",[s._v("注释")]),s._v("形式紧贴"),a("strong",[s._v("代码声明对象")])]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:[PLUGIN]:[ARGS]:[OPTIONS]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"plugin-插件名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-插件名"}},[s._v("#")]),s._v(" PLUGIN - 插件名")]),s._v(" "),a("p",[s._v("不同插件在注册到内核时会有唯一的插件名标识，这个标识也会用来为各个插件匹配注解，忽略大小写。")]),s._v(" "),a("p",[s._v("如：插件 "),a("code",[s._v("Foo")]),s._v(" 会使用 "),a("code",[s._v("+zz:foo")]),s._v(" 匹配注解")]),s._v(" "),a("h3",{attrs:{id:"args-必填参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#args-必填参数"}},[s._v("#")]),s._v(" ARGS - 必填参数")]),s._v(" "),a("p",[s._v("不同插件会指定固定数量的必填参数，参数会以 "),a("code",[s._v(":")]),s._v(" 间隔按插件指定顺序追加在注解后，\n如果该注解的固定参数数量不足，将会被忽略。")]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("p",[s._v("插件 "),a("code",[s._v("foo")]),s._v(" 指定的参数数量为 2，符合要求注解为 "),a("code",[s._v("+zz:foo:arg1:arg2")])]),s._v(" "),a("p",[s._v("而 "),a("code",[s._v("+zz:foo:arg1")]),s._v(" 或 "),a("code",[s._v("+zz:foo")]),s._v(" 会被忽略")]),s._v(" "),a("h4",{attrs:{id:"为什么要忽略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要忽略"}},[s._v("#")]),s._v(" 为什么要忽略")]),s._v(" "),a("p",[s._v("如果一个缺省参数是可以被推断默认值的，按"),a("RouterLink",{attrs:{to:"/zh/guide/#设计理念"}},[s._v("设计理念")]),s._v("，此参数不应被列为必填参数。")],1),s._v(" "),a("h3",{attrs:{id:"options-可填参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-可填参数"}},[s._v("#")]),s._v(" OPTIONS - 可填参数")]),s._v(" "),a("p",[s._v("超出插件指定必填参数后的内容，会被按 "),a("code",[s._v("Key = Value")]),s._v(" 组解析为可选参数提供给插件")]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("p",[s._v("插件 "),a("code",[s._v("foo")]),s._v(" 指定的参数数量为 2")]),s._v(" "),a("p",[a("code",[s._v("+zz:foo:arg1:arg2:arg3=value:arg4")])]),s._v(" "),a("p",[s._v("将会被解析出 可选参数 "),a("code",[s._v('{"arg3":"value","arg4":""}')])]),s._v(" "),a("h4",{attrs:{id:"重复参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重复参数"}},[s._v("#")]),s._v(" 重复参数")]),s._v(" "),a("p",[s._v("在可选参数 Value 中，如果存在数组类值，一般都会使用 "),a("code",[s._v(",")]),s._v(" 进行分隔，如：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo:set=a,b,c,d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("解析器会将，相同 Key 的 Value 以这方式进行聚合 (包括空值)")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo:set=a:set=:set=b:set=c,d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("等价于")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo:set=a,,b,c,d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"boolean-option"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#boolean-option"}},[s._v("#")]),s._v(" Boolean Option")]),s._v(" "),a("p",[s._v("部分可选参数，插件会以某个 Key 存在与否 作为 "),a("code",[s._v("Boolean Option")]),s._v("。")]),s._v(" "),a("p",[s._v("此类参数如果 Value 不为空，会额外判断 Value 是否为 "),a("code",[s._v("0 / false / null")]),s._v(" 等否定含义。")]),s._v(" "),a("p",[s._v("即:")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("+zz:bar:arg3=value:arg4")]),s._v(" 解析为 "),a("code",[s._v('{"arg3":"value","arg4":""}')])]),s._v(" "),a("li",[a("code",[s._v("+zz:bar:arg3=value:arg4=true")]),s._v(" 解析为 "),a("code",[s._v('{"arg3":"value","arg4":"true"}')])]),s._v(" "),a("li",[a("code",[s._v("+zz:bar:arg3=value:arg4=false")]),s._v(" 解析为 "),a("code",[s._v('{"arg3":"value"}')])]),s._v(" "),a("li",[a("code",[s._v("+zz:bar:arg3=value:arg4=0")]),s._v(" 解析为 "),a("code",[s._v('{"arg3":"value"}')])])]),s._v(" "),a("h3",{attrs:{id:"声明对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#声明对象"}},[s._v("#")]),s._v(" 声明对象")]),s._v(" "),a("p",[s._v("注解可以添加在 "),a("code",[s._v("Decl")]),s._v(" 代码块，也可以添加给指定的 "),a("code",[s._v("Spec")]),s._v(" 对象。")]),s._v(" "),a("p",[s._v("不理解 "),a("code",[s._v("Decl")]),s._v(" 和 "),a("code",[s._v("Spec")]),s._v(" 定义的可以先看下 "),a("a",{attrs:{href:"./how-it-works"}},[s._v("原理")]),s._v(" 部分。")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" t\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tT0 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\tT1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:bar")]),s._v("\n\tT2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("在 "),a("code",[s._v("Decl")]),s._v(" 范围声明的注解，会被复制给 "),a("code",[s._v("Decl")]),s._v(" 内定义的所有 "),a("code",[s._v("Spec")]),s._v(" 对象内，即上例等价于：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" t\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n\tT0 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n\tT1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:bar")]),s._v("\n\tT2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"多行注解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多行注解"}},[s._v("#")]),s._v(" 多行注解")]),s._v(" "),a("h4",{attrs:{id:"注解判定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解判定"}},[s._v("#")]),s._v(" 注解判定")]),s._v(" "),a("p",[s._v("只要是和声明对象关联的注释，在每行行首 (忽略空白字符串) 存在注解前缀 "),a("code",[s._v("+zz:")]),s._v(" 都会被认为是注解行。")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n+zz:foo  <- 注解行\n  +zz:foo  <- 注解行\n x +zoo:foo <- 非注解行\n//   +zoo:foo  <- 非注解行\n*/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo  <- 注解行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   +zoo:  <- 注解行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   +zoo-  <- 非注解行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// x +zoo:foo <- 非注解行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h4",{attrs:{id:"重复注解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重复注解"}},[s._v("#")]),s._v(" 重复注解")]),s._v(" "),a("p",[s._v("一个代码声明对象上可能会有多个注解，且可能会是相同插件的重复注解，这些注解不会被认为是异常，而是会被重复提供给插件。")]),s._v(" "),a("p",[s._v("具体对于同对象重复注解的处理方式和结果，会基于不同插件实现逻辑而不同。")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:foo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:bar")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:bar:filename=./bar")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"大于配置的约定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大于配置的约定"}},[s._v("#")]),s._v(" 大于配置的约定")]),s._v(" "),a("h3",{attrs:{id:"生成文件路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成文件路径"}},[s._v("#")]),s._v(" 生成文件路径")]),s._v(" "),a("p",[s._v("一部分的内置插件会有生成目标文件的必填或可选参数，如：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:impl:./impl.go")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:wire:inject=/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这些目录文件目标路径会遵循以下规则：")]),s._v(" "),a("p",[s._v("假设项目根路径在 "),a("code",[s._v("/go/src/project/")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/go/src/project/\n├── go.mod\n└── types\n    └── api.go\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_1-如果包含-go-后缀-则以该文件名为生成目标文件名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-如果包含-go-后缀-则以该文件名为生成目标文件名"}},[s._v("#")]),s._v(" 1. 如果包含 "),a("code",[s._v(".go")]),s._v(" 后缀，则以该文件名为生成目标文件名")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./api.go")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上例子生成的文件名为 "),a("code",[s._v("api.go")]),s._v(" 具体目录路径会在后续规则说明")]),s._v(" "),a("h4",{attrs:{id:"_2-不包含-go-后缀-则会使用插件提供的默认文件名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-不包含-go-后缀-则会使用插件提供的默认文件名"}},[s._v("#")]),s._v(" 2. 不包含 "),a("code",[s._v(".go")]),s._v(" 后缀，则会使用插件提供的默认文件名")]),s._v(" "),a("p",[s._v("插件使用的默认文件名大部分是  "),a("code",[s._v("zzgen.${plugin}.go")])]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上例子生成的文件名为 "),a("code",[s._v("zzgen.api.go")])]),s._v(" "),a("h4",{attrs:{id:"_3-路径参数支持-golang-模版语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-路径参数支持-golang-模版语法"}},[s._v("#")]),s._v(" 3. 路径参数支持 Golang 模版语法")]),s._v(" "),a("p",[s._v("支持的模版对象字段有 "),a("code",[s._v("Name")]),s._v(" "),a("code",[s._v("Package")])]),s._v(" "),a("p",[s._v("同时支持一系列字符串函数 "),a("code",[s._v("snake / camel ...")]),s._v(" "),a("a",{attrs:{href:"https://github.com/go-zing/gozz-core/blob/main/generate.go#L32",target:"_blank",rel:"noopener noreferrer"}},[s._v("详情见此"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./{{ lower .Name }}.go")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Foo "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上例子生成的文件名为 "),a("code",[s._v("foo.go")])]),s._v(" "),a("h4",{attrs:{id:"_4-如果文件名是相对路径-那么起点是-注解当前的文件所在目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-如果文件名是相对路径-那么起点是-注解当前的文件所在目录"}},[s._v("#")]),s._v(" 4. 如果文件名是相对路径，那么起点是 注解当前的文件所在目录")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./apix.go")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上指定 "),a("code",[s._v(".go")]),s._v(" 文件名例子生成的文件完整路径为  "),a("code",[s._v("/go/src/project/types/apix.go")])]),s._v(" "),a("br"),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:./apix")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上不指定 "),a("code",[s._v(".go")]),s._v(" 文件名例子生成的文件完整路径为  "),a("code",[s._v("/go/src/project/types/apix/zzgen.api.go")])]),s._v(" "),a("h4",{attrs:{id:"_5-如果文件名是绝对路径-那么起点是-注解文件所在-module-项目根目录-go-mod-所在目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-如果文件名是绝对路径-那么起点是-注解文件所在-module-项目根目录-go-mod-所在目录"}},[s._v("#")]),s._v(" 5. 如果文件名是绝对路径，那么起点是 注解文件所在 "),a("code",[s._v("module")]),s._v(" 项目根目录 ( "),a("code",[s._v("go.mod")]),s._v(" 所在目录 )")]),s._v(" "),a("p",[s._v("该目录通过在注解文件所在目录执行 "),a("code",[s._v("go env GOMOD")]),s._v(" 获取")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:/apix.go")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上指定 "),a("code",[s._v(".go")]),s._v(" 文件名例子生成的文件完整路径为  "),a("code",[s._v("/go/src/project/apix.go")])]),s._v(" "),a("br"),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:/apix")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上不指定 "),a("code",[s._v(".go")]),s._v(" 文件名例子生成的文件完整路径为  "),a("code",[s._v("/go/src/project/apix/zzgen.api.go")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("假设在 "),a("code",[s._v("types")]),s._v(" 目录内存在子 "),a("code",[s._v("module")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/go/src/project/\n├── go.mod\n└── types\n    ├── api.go\n    └── go.mod\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /go/src/project/types/api.go")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上例子生成的文件完整路径会变为  "),a("code",[s._v("/go/src/project/types/zzgen.api.go")])]),s._v(" "),a("h3",{attrs:{id:"生成模版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成模版"}},[s._v("#")]),s._v(" 生成模版")]),s._v(" "),a("p",[s._v("对于覆盖式模版生成代码，生成代码文件前会检查该目录是否存在已有的 "),a("code",[s._v("${filename}.impl")]),s._v(" 文件。")]),s._v(" "),a("p",[s._v("若有，则会直接读取该模版文件作为生成模版。")]),s._v(" "),a("p",[s._v("否则，将会使用插件内建的默认模版文本，并输出为 "),a("code",[s._v("${filename}.impl")]),s._v(" 模版文件在生成代码同目录。")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("[WIP] 代码模版生成类的插件都支持添加 "),a("code",[s._v("template=${filename}")]),s._v(" 可选参数，例：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// +zz:api:/:template=/.gozz/api.tmpl")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" API "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("模版文件和生成文件的路径定位规则一致，没有 "),a("code",[s._v(".tmpl")]),s._v(" 后缀时，会使用生成文件名加上 "),a("code",[s._v(".tmpl")]),s._v(" 后缀作为模版文件名。")])])}),[],!1,null,null,null);a.default=n.exports}}]);